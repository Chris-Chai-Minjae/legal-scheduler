<%# @TASK T9.2 - Keywords Settings Page %>
<%# @SPEC Based on w07-settings-keywords.html from Stitch design %>

<% content_for :title, "í‚¤ì›Œë“œ ì„¤ì • - Legal Scheduler AI" %>

<div class="settings-header">
  <h1>í‚¤ì›Œë“œ ì„¤ì •</h1>
  <p>LBOX ìº˜ë¦°ë”ì—ì„œ ê°ì§€í•  í‚¤ì›Œë“œë¥¼ ì„¤ì •í•˜ì„¸ìš”</p>
</div>

<!-- Settings Tabs -->
<%= render "shared/settings_tabs" %>

<!-- Keyword Management -->
<div class="section" style="padding: 32px;">
  <h2 class="section-title">í‚¤ì›Œë“œ ê´€ë¦¬</h2>
  <p class="section-subtitle">ì¼ì • ì œëª©ì— í¬í•¨ëœ í‚¤ì›Œë“œë¥¼ ê°ì§€í•˜ì—¬ ìë™ìœ¼ë¡œ ì„œë©´ ì‘ì„± ì¼ì •ì„ ìƒì„±í•©ë‹ˆë‹¤</p>

  <!-- Keyword Input -->
  <%= form_with url: keywords_path, method: :post,
      data: { controller: "keyword-input", turbo_frame: "keywords_list" } do |f| %>
    <div class="keyword-input-group">
      <%= f.text_field :name,
          class: "input",
          placeholder: "ìƒˆ í‚¤ì›Œë“œ ì…ë ¥... (ì˜ˆ: ë³€ë¡ , ì¬íŒ, ê²€ì°°ì¡°ì‚¬)",
          data: { keyword_input_target: "input", action: "keypress->keyword-input#handleKeypress" } %>
      <%= f.submit "ì¶”ê°€", class: "btn-add" %>
    </div>
  <% end %>

  <!-- Current Keywords -->
  <%= turbo_frame_tag "keywords_list" do %>
    <% if @keywords.any? %>
      <div class="keyword-chips" style="margin-bottom: 24px;">
        <% @keywords.each do |keyword| %>
          <span class="chip">
            <%= keyword.name %>
            <%= button_to keyword_path(keyword),
                method: :delete,
                class: "chip-remove",
                style: "background: none; border: none; padding: 0; font-size: 18px; font-weight: bold; cursor: pointer; color: inherit;",
                data: { turbo_frame: "keywords_list", turbo_confirm: "ì´ í‚¤ì›Œë“œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?" } do %>
              &times;
            <% end %>
          </span>
        <% end %>
      </div>
    <% else %>
      <!-- Empty State -->
      <div class="empty-state" id="emptyState">
        <div class="empty-icon">ğŸ”‘</div>
        <p>ì•„ì§ í‚¤ì›Œë“œê°€ ì—†ìŠµë‹ˆë‹¤</p>
        <%= button_to "ê¸°ë³¸ í‚¤ì›Œë“œ ì¶”ê°€í•˜ê¸° (ë³€ë¡ , ê²€ì°°ì¡°ì‚¬, ì¬íŒ)",
            keywords_path(add_defaults: true),
            method: :post,
            class: "btn btn-secondary",
            style: "margin-top: 16px;",
            data: { turbo_frame: "keywords_list" } %>
      </div>
    <% end %>
  <% end %>

  <!-- Info Box -->
  <div class="info-box">
    <div class="info-icon">ğŸ’¡</div>
    <div class="info-text">
      ì´ í‚¤ì›Œë“œê°€ í¬í•¨ëœ LBOX ìº˜ë¦°ë” ì¼ì •ì´ ê°ì§€ë˜ë©´ ì„œë©´ ì‘ì„± ì¼ì •ì´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.
      <br>
      ì˜ˆ: "2024ë‚˜23244 ê°€ìŠµê¸° ì‚¬ê±´ <strong>ë³€ë¡ </strong>ê¸°ì¼" â†’ "ê°€ìŠµê¸° ì‚¬ê±´ ì„œë©´ì‘ì„±" ì¼ì • ìƒì„±
    </div>
  </div>
</div>

<style>
  .settings-header {
    margin-bottom: 24px;
  }

  .settings-header h1 {
    font-size: 24px;
    font-weight: 600;
    color: var(--gray-900);
    margin-bottom: 4px;
  }

  .settings-header p {
    font-size: 14px;
    color: var(--gray-500);
  }

  .keyword-input-group {
    display: flex;
    gap: 12px;
    margin-bottom: 24px;
  }

  .keyword-input-group .input {
    flex: 1;
  }
</style>
