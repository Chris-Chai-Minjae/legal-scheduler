<%# @TASK T9.2 - Onboarding Layout %>
<%# @SPEC Based on w03-onboarding.html from Stitch design %>

<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "온보딩 - Legal Scheduler AI" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <style>
      :root {
        --primary: #2563EB;
        --primary-dark: #1D4ED8;
        --success: #22C55E;
        --gray-900: #111827;
        --gray-700: #374151;
        --gray-500: #6B7280;
        --gray-300: #D1D5DB;
        --gray-100: #F3F4F6;
        --white: #FFFFFF;
        --lbox: #8B5CF6;
        --work: #2563EB;
        --personal: #10B981;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
                     'Noto Sans KR', Roboto, 'Helvetica Neue',
                     Arial, sans-serif;
        background: var(--gray-100);
        min-height: 100vh;
      }

      .onboarding-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 48px 24px;
      }

      /* Progress Indicator */
      .progress-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 48px;
      }

      .step {
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        flex: 1;
      }

      .step:not(:last-child)::after {
        content: '';
        position: absolute;
        top: 20px;
        left: 50%;
        width: 100%;
        height: 2px;
        background: var(--gray-300);
        z-index: -1;
      }

      .step.completed:not(:last-child)::after {
        background: var(--success);
      }

      .step-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--gray-300);
        color: var(--gray-500);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        margin-bottom: 8px;
        transition: all 0.3s;
      }

      .step.active .step-circle {
        background: var(--primary);
        color: white;
      }

      .step.completed .step-circle {
        background: var(--success);
        color: white;
      }

      .step-label {
        font-size: 12px;
        color: var(--gray-500);
        text-align: center;
      }

      .step.active .step-label {
        color: var(--primary);
        font-weight: 500;
      }

      /* Content Card */
      .content-card {
        background: var(--white);
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        padding: 48px;
        text-align: center;
        margin-bottom: 24px;
      }

      .content-card.left-align {
        text-align: left;
      }

      .icon-large {
        font-size: 64px;
        margin-bottom: 24px;
      }

      .content-title {
        font-size: 24px;
        font-weight: 600;
        color: var(--gray-900);
        margin-bottom: 12px;
      }

      .content-description {
        font-size: 16px;
        color: var(--gray-500);
        margin-bottom: 32px;
      }

      /* Calendar Selection */
      .calendar-grid {
        display: grid;
        gap: 24px;
        margin: 32px 0;
      }

      .calendar-item {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        border: 1px solid var(--gray-300);
        border-radius: 8px;
      }

      .calendar-color {
        width: 12px;
        height: 48px;
        border-radius: 4px;
      }

      .calendar-color.lbox { background: var(--lbox); }
      .calendar-color.work { background: var(--work); }
      .calendar-color.personal { background: var(--personal); }

      .calendar-info { flex: 1; }

      .calendar-label {
        font-size: 14px;
        font-weight: 500;
        color: var(--gray-700);
        margin-bottom: 4px;
      }

      .calendar-desc {
        font-size: 12px;
        color: var(--gray-500);
      }

      .select {
        width: 100%;
        padding: 12px 16px;
        border: 1px solid var(--gray-300);
        border-radius: 8px;
        font-size: 16px;
        background: white;
        cursor: pointer;
      }

      .select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

      /* Keyword Input */
      .keyword-input-group {
        display: flex;
        gap: 12px;
        margin-bottom: 16px;
      }

      .input {
        flex: 1;
        padding: 12px 16px;
        border: 1px solid var(--gray-300);
        border-radius: 8px;
        font-size: 16px;
      }

      .input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

      .btn-add {
        background: var(--gray-300);
        color: var(--gray-700);
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
      }

      .btn-add:hover {
        background: var(--primary);
        color: white;
      }

      .keyword-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: #EFF6FF;
        color: var(--primary);
        border-radius: 9999px;
        font-size: 14px;
      }

      .chip-remove {
        cursor: pointer;
        font-weight: bold;
      }

      /* Buttons */
      .button-group {
        display: flex;
        gap: 12px;
        justify-content: space-between;
      }

      .btn {
        padding: 12px 24px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
        border: none;
        flex: 1;
      }

      .btn-primary:hover {
        background: var(--primary-dark);
      }

      .btn-secondary {
        background: transparent;
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
      }

      .btn-secondary:hover {
        background: var(--gray-100);
      }

      /* Info Box */
      .info-box {
        display: flex;
        gap: 12px;
        padding: 16px;
        background: #F0F9FF;
        border: 1px solid #BFDBFE;
        border-radius: 8px;
        margin-top: 24px;
      }

      .info-icon {
        font-size: 20px;
        flex-shrink: 0;
      }

      .info-text {
        font-size: 14px;
        color: var(--gray-700);
        line-height: 1.5;
      }

      @media (max-width: 640px) {
        .content-card {
          padding: 32px 24px;
        }

        .progress-bar {
          margin-bottom: 32px;
        }

        .step-label {
          font-size: 10px;
        }
      }
    </style>
  </head>

  <body>
    <div class="onboarding-container">
      <!-- Progress Bar -->
      <div class="progress-bar">
        <div class="step <%= @step == 1 ? 'active' : (@step > 1 ? 'completed' : '') %>">
          <div class="step-circle"><%= @step > 1 ? "&#10003;" : "1" %></div>
          <div class="step-label">Google<br>연동</div>
        </div>
        <div class="step <%= @step == 2 ? 'active' : (@step > 2 ? 'completed' : '') %>">
          <div class="step-circle"><%= @step > 2 ? "&#10003;" : "2" %></div>
          <div class="step-label">Telegram<br>연결</div>
        </div>
        <div class="step <%= @step == 3 ? 'active' : (@step > 3 ? 'completed' : '') %>">
          <div class="step-circle"><%= @step > 3 ? "&#10003;" : "3" %></div>
          <div class="step-label">캘린더<br>설정</div>
        </div>
        <div class="step <%= @step == 4 ? 'active' : (@step > 4 ? 'completed' : '') %>">
          <div class="step-circle"><%= @step > 4 ? "&#10003;" : "4" %></div>
          <div class="step-label">키워드<br>설정</div>
        </div>
      </div>

      <%= yield %>
    </div>
  </body>
</html>
