<%# Telegram ì„¤ì • í˜ì´ì§€ %>

<% content_for :title, "Telegram ì„¤ì • - Legal Scheduler AI" %>

<div class="settings-header">
  <h1>Telegram ì„¤ì •</h1>
  <p>Telegram Botì„ ì—°ê²°í•˜ì—¬ ì•Œë¦¼ì„ ë°›ìœ¼ì„¸ìš”</p>
</div>

<!-- Settings Tabs -->
<%= render "shared/settings_tabs" %>

<div class="section" style="padding: 32px;">
  <h2 class="section-title">Telegram ì—°ê²° ìƒíƒœ</h2>

  <% if @user.telegram_chat_id.present? %>
    <!-- ì—°ê²°ë¨ -->
    <div style="display: flex; align-items: center; gap: 16px; padding: 20px; background: #ECFDF5; border-radius: 12px; margin-bottom: 24px;">
      <div style="font-size: 48px;">âœ…</div>
      <div>
        <div style="font-weight: 600; color: #065F46; font-size: 18px;">ì—°ê²°ë¨</div>
        <div style="color: #047857; font-size: 14px;">Chat ID: <%= @user.telegram_chat_id %></div>
      </div>
      <div style="margin-left: auto;">
        <%= button_to "ì—°ê²° í•´ì œ", unlink_telegram_settings_path,
            method: :delete,
            class: "btn btn-secondary",
            data: { confirm: "ì •ë§ Telegram ì—°ê²°ì„ í•´ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?" } %>
      </div>
    </div>

    <div class="info-box">
      <div class="info-icon">ğŸ’¡</div>
      <div class="info-text">
        ì„œë©´ ì‘ì„± ì¼ì •ì´ ìƒì„±ë˜ë©´ Telegramìœ¼ë¡œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤.<br>
        ì•Œë¦¼ì—ì„œ ì§ì ‘ ìŠ¹ì¸/ê±°ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </div>
    </div>

  <% else %>
    <!-- ë¯¸ì—°ê²° -->
    <div style="display: flex; align-items: center; gap: 16px; padding: 20px; background: #FEF3C7; border-radius: 12px; margin-bottom: 24px;">
      <div style="font-size: 48px;">âš ï¸</div>
      <div>
        <div style="font-weight: 600; color: #92400E; font-size: 18px;">ì—°ê²°ë˜ì§€ ì•ŠìŒ</div>
        <div style="color: #B45309; font-size: 14px;">ì•„ë˜ ë°©ë²•ìœ¼ë¡œ Telegramì„ ì—°ê²°í•´ì£¼ì„¸ìš”</div>
      </div>
    </div>

    <h3 style="margin-bottom: 16px; color: #374151;">ì—°ê²° ë°©ë²•</h3>

    <div style="background: #F9FAFB; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
      <div style="display: flex; gap: 16px; margin-bottom: 16px;">
        <div style="width: 32px; height: 32px; background: #2563EB; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">1</div>
        <div>
          <div style="font-weight: 500;">Telegramì—ì„œ Bot ì°¾ê¸°</div>
          <div style="color: #6B7280; font-size: 14px;">@MINJAEAI_Bot ê²€ìƒ‰</div>
        </div>
      </div>
      <div style="display: flex; gap: 16px; margin-bottom: 16px;">
        <div style="width: 32px; height: 32px; background: #2563EB; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">2</div>
        <div>
          <div style="font-weight: 500;">/start ëª…ë ¹ì–´ ì „ì†¡</div>
          <div style="color: #6B7280; font-size: 14px;">Botê³¼ ëŒ€í™” ì‹œì‘</div>
        </div>
      </div>
      <div style="display: flex; gap: 16px;">
        <div style="width: 32px; height: 32px; background: #2563EB; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600;">3</div>
        <div>
          <div style="font-weight: 500;">Chat ID ì…ë ¥</div>
          <div style="color: #6B7280; font-size: 14px;">Botì´ ì•Œë ¤ì£¼ëŠ” Chat IDë¥¼ ì•„ë˜ì— ì…ë ¥í•˜ì„¸ìš”</div>
        </div>
      </div>
    </div>

    <%= form_with url: link_telegram_settings_path, method: :post, local: true do |f| %>
      <div style="display: flex; gap: 12px; align-items: center;">
        <%= f.text_field :chat_id,
            placeholder: "Chat ID ì…ë ¥ (ì˜ˆ: 925514801)",
            style: "flex: 1; padding: 12px 16px; border: 1px solid #D1D5DB; border-radius: 8px; font-size: 16px;" %>
        <%= f.submit "ì—°ê²°í•˜ê¸°", class: "btn btn-primary" %>
      </div>
    <% end %>
  <% end %>
</div>

<style>
  .settings-header {
    margin-bottom: 24px;
  }
  .settings-header h1 {
    font-size: 24px;
    font-weight: 600;
    color: var(--gray-900);
    margin-bottom: 4px;
  }
  .settings-header p {
    font-size: 14px;
    color: var(--gray-500);
  }
  .section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--gray-900);
    margin-bottom: 16px;
  }
  .info-box {
    display: flex;
    gap: 12px;
    padding: 16px;
    background: #F0F9FF;
    border: 1px solid #BFDBFE;
    border-radius: 8px;
  }
  .info-icon {
    font-size: 20px;
  }
  .info-text {
    font-size: 14px;
    color: var(--gray-700);
    line-height: 1.5;
  }
  .btn {
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 16px;
    font-weight: 500;
    cursor: pointer;
    border: none;
  }
  .btn-primary {
    background: var(--primary, #2563EB);
    color: white;
  }
  .btn-secondary {
    background: white;
    color: var(--gray-700, #374151);
    border: 1px solid var(--gray-300, #D1D5DB);
  }
</style>
